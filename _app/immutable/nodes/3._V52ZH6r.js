import"../chunks/DsnmJJEf.js";import{o as lt}from"../chunks/Cnc0drAn.js";import{an as ce,af as V,ah as p,ao as it,ad as st,ap as L,X as Ce,ae as P,aq as dt,ag as G,ai as ut,ar as ct,am as I,aj as l,P as t,al as v,ak as o,N as f,as as _,at as Re,au as ft,av as vt}from"../chunks/CRhUktne.js";import{i as Y,b as pt}from"../chunks/DMatXIJL.js";import{I as ze,s as Ae,$ as gt,e as ie,i as se,a as de,b as Ge,c as Me,X as mt,t as q,f as bt,d as O,g as ht}from"../chunks/DtAwGqXd.js";import{D as Te,s as ue,a as je,L as _t,g as xt,b as yt}from"../chunks/edkJ7dHI.js";import{l as Se,s as De,a as wt,b as Pe}from"../chunks/cFXEhR4b.js";import"../chunks/DSnbFVBB.js";function $t(W,R){const H=Se(R,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.548.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]];ze(W,De({name:"printer"},()=>H,{get iconNode(){return i},children:(N,K)=>{var d=ce(),M=V(d);Ae(M,R,"default",{}),p(N,d)},$$slots:{default:!0}}))}function kt(W,R){const H=Se(R,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.548.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];ze(W,De({name:"refresh-cw"},()=>H,{get iconNode(){return i},children:(N,K)=>{var d=ce(),M=V(d);Ae(M,R,"default",{}),p(N,d)},$$slots:{default:!0}}))}var Ct=P(`<style>@keyframes winningGlow {
			0%,
			100% {
				box-shadow:
					0 0 20px rgba(255, 255, 255, 0.4),
					0 0 10px rgba(255, 255, 255, 0.3);
				border-color: rgba(255, 255, 255, 0.8);
			}
			50% {
				box-shadow:
					0 0 40px rgba(255, 255, 255, 0.8),
					0 0 20px rgba(255, 255, 255, 0.6),
					0 0 10px rgba(255, 255, 255, 0.4);
				border-color: rgba(255, 255, 255, 1);
			}
		}

		.winning-cell {
			animation: winningGlow 2s ease-in-out infinite;
		}

		@media print {
			@page {
				margin: 0;
				size: auto;
			}

			body {
				margin: 0;
				padding: 0;
			}

			/* Hide buttons and guess box */
			.no-print {
				display: none !important;
			}

			/* Show footer only on print */
			.print-only {
				display: block !important;
			}

			.grid {
				width: 100%;
			}

			/* Disable animations on print */
			.winning-cell {
				animation: none !important;
			}
		}

		/* Hide footer on screen */
		.print-only {
			display: none;
		}</style>`),Gt=Re("<path></path>"),Mt=Re('<svg viewBox="0 0 24 24" class="opacity-30"></svg>'),Tt=P('<div class="absolute inset-0 flex items-center justify-center rounded-lg"><!></div>'),jt=P('<button type="button"><div><!></div> <!></button>'),Pt=P('<div class="flex h-full flex-col gap-2"><textarea id="guess-input" class="flex-1 resize-none rounded-lg p-3 text-center text-4xl text-white placeholder-slate-500 focus:outline-none"></textarea> <button type="button" class="shrink-0 bg-purple-500 px-4 py-2 font-semibold text-white transition-all hover:bg-purple-600 disabled:cursor-not-allowed disabled:opacity-50"> </button></div>'),Rt=P('<div class="pointer-events-none absolute inset-0 z-10 bg-black/30 backdrop-blur-2xl"></div> <div class="absolute inset-0 z-20 flex items-center justify-center text-4xl font-light text-purple-400"> </div>',1),zt=P('<button type="button" class="relative flex h-full w-full flex-col items-center justify-center gap-2 overflow-hidden rounded-lg text-5xl transition-all"><!> <div> </div></button>'),At=P('<div class="absolute flex w-full items-center justify-between p-4 sm:p-6"><div><!></div> <div class="no-print flex gap-2"><button type="button" class="flex items-center gap-2 rounded-lg border-2 border-purple-400/30 bg-slate-900/50 px-3 py-2 text-purple-400 transition-all hover:border-purple-400 hover:bg-slate-800/70 sm:px-4"><!> <span class="hidden sm:inline"> </span></button> <button type="button" class="flex items-center gap-2 rounded-lg border-2 border-purple-400/30 bg-slate-900/50 px-3 py-2 text-purple-400 transition-all hover:border-purple-400 hover:bg-slate-800/70 sm:px-4"><!> <span class="hidden sm:inline"> </span></button></div></div> <div class="flex flex-1 flex-col items-center justify-center overflow-hidden p-4"><div class="flex h-full w-full max-w-2xl flex-col items-center justify-center gap-12 pt-16 md:p-4 xl:p-4"><div class="grid grid-cols-5 gap-1 md:gap-2"></div> <div class="no-print flex w-full flex-1 flex-col overflow-hidden rounded-lg border-2 border-purple-500"><!></div></div></div>',1),St=P('<div class="fixed inset-0 flex flex-col text-white"><!> <div class="print-only absolute bottom-4 w-full text-center text-slate-400"><span class="text-sm"> </span></div></div> <!> <!>',1);function Vt(W,R){st(R,!0);const H=()=>Pe(ue,"$settings",N),i=()=>Pe(gt,"$_",N),[N,K]=wt();let d=L(Ce([])),M=L(!1),U=L(!1),B=L(""),T=L("input"),fe=L(void 0),Z=L(Ce(new Set));const ve={composer:6,work:6,era:5,type:4,decade:4};function pe(){const r=Array(5).fill(null).map(()=>Array(5).fill(null)),e=[];for(const u of je){const c=ve[u.id]||0;for(let n=0;n<c;n++)e.push(u.id)}let a=0;const s=1e3;for(;a<s;){a++;let u=!0;const c=[...e].sort(()=>Math.random()-.5);let n=0;for(let z=0;z<5;z++){for(let A=0;A<5;A++){let F=!1;const Q=n;for(;n<c.length;){const X=c[n];if(Le(r,z,A,X)){r[z][A]={category:X,marked:!1},n++,F=!0;break}if(n++,n>=c.length){n=Q;break}}if(!F){u=!1;break}}if(!u)break}if(u)return r}return console.warn("Could not generate grid with constraints, using fallback"),qe()}function Le(r,e,a,s){let u=0;for(let n=0;n<a;n++)r[e][n]?.category===s&&u++;if(u>=2)return!1;let c=0;for(let n=0;n<e;n++)r[n][a]?.category===s&&c++;return!(c>=2||a>=1&&r[e][a-1]?.category===s&&a>=2&&r[e][a-2]?.category===s||e>=1&&r[e-1][a]?.category===s&&e>=2&&r[e-2][a]?.category===s)}function qe(){const r=Array(5).fill(null).map(()=>Array(5).fill(null)),e=[];for(const u of je){const c=ve[u.id]||0;for(let n=0;n<c;n++)e.push(u.id)}const a=[...e].sort(()=>Math.random()-.5);let s=0;for(let u=0;u<5;u++)for(let c=0;c<5;c++)r[u][c]={category:a[s%a.length],marked:!1},s++;return r}function ee(){ue.update(r=>({...r,bingoGrid:t(d)}))}function He(){const r=H().bingoGrid;r&&r.length===5&&r[0].length===5?(console.log("Loading saved bingo grid",r.map(e=>e.map(a=>a.category))),f(d,r.map(e=>e.map(a=>({category:a.category,marked:a.marked}))),!0)):(console.log("No valid saved grid found, generating new grid",H()),f(d,pe(),!0),ee())}function ge(){const r=new Set;for(let e=0;e<5;e++)if(t(d)[e].every(a=>a.marked))for(let a=0;a<5;a++)r.add(`${e}-${a}`);for(let e=0;e<5;e++)if(t(d).every(a=>a[e].marked))for(let a=0;a<5;a++)r.add(`${a}-${e}`);if(t(d).every((e,a)=>e[a].marked))for(let e=0;e<5;e++)r.add(`${e}-${e}`);if(t(d).every((e,a)=>e[4-a].marked))for(let e=0;e<5;e++)r.add(`${e}-${4-e}`);f(Z,r,!0)}function Ne(r,e){t(d)[r][e].marked=!t(d)[r][e].marked,ee(),ge()}function Be(){f(M,!0)}function Ee(){f(d,pe(),!0),ee(),f(Z,new Set,!0),f(M,!1)}function Ie(){f(U,!0)}function Ve(){window.location.href="/"}function We(){window.print()}function Qe(){f(B,""),f(T,"input")}function Xe(){t(B).trim()&&f(T,"hidden")}function Ye(){f(T,"revealed")}function Oe(){t(T)==="revealed"?Qe():t(T)==="hidden"&&Ye()}lt(()=>{ue.load(),He(),ge()});var me=St();dt(r=>{var e=Ct();G(a=>ct.title=`${a??""} - Bingo`,[()=>i()("app.title")]),p(r,e)});var te=V(me),be=l(te);{var Fe=r=>{var e=At(),a=V(e),s=l(a),u=l(s);_t(u,{onClick:Ie,size:"medium"}),o(s);var c=v(s,2),n=l(c);n.__click=We;var z=l(n);$t(z,{class:"h-5 w-5"});var A=v(z,2),F=l(A,!0);o(A),o(n);var Q=v(n,2);Q.__click=Be;var X=l(Q);kt(X,{class:"h-5 w-5"});var ye=v(X,2),Ue=l(ye,!0);o(ye),o(Q),o(c),o(a);var ae=v(a,2),we=l(ae),re=l(we);ie(re,21,()=>t(d),se,(x,g,m)=>{var k=ce(),S=V(k);ie(S,17,()=>t(g),se,(y,j,w)=>{const b=_(()=>xt(t(j).category)),D=_(()=>t(Z).has(`${m}-${w}`));var h=jt();h.__click=()=>Ne(m,w);let J;var E=l(h);let $e;var at=l(E);{var rt=C=>{var $=Mt();ie($,21,()=>t(b).iconPaths,se,(oe,le)=>{var ke=Gt();G(()=>Me(ke,"d",t(le))),p(oe,ke)}),o($),G(()=>Ge($,`fill: ${t(b).color1??""};`)),p(C,$)};Y(at,C=>{t(b)&&C(rt)})}o(E);var nt=v(E,2);{var ot=C=>{var $=Tt(),oe=l($);{let le=_(()=>t(b)?.color1);mt(oe,{class:"h-16 w-16 sm:h-24 sm:w-24",get style(){return`color: ${t(le)??""}; stroke-width: 4;`}})}o($),p(C,$)};Y(nt,C=>{t(j).marked&&C(ot)})}o(h),G((C,$)=>{J=de(h,1,"relative flex aspect-square cursor-pointer items-center justify-center rounded-lg border-2 p-2 transition-all",null,J,C),Ge(h,`border-color: ${(t(D)?"#ffffff":t(b)?.color1||"#06b6d4")??""}; background-color: ${t(D)?"#ffffff40":t(j).marked?t(b)?.color1+"80":t(b)?.color1+"20"}; --cell-bg-unmarked: ${(t(b)?.color1||"#06b6d4")+"20"};`),$e=de(E,1,"w-14 items-center justify-center sm:w-16 lg:w-20",null,$e,$)},[()=>({"winning-cell":t(D)}),()=>({"opacity-0":t(j).marked})]),p(y,h)}),p(x,k)}),o(re);var ne=v(re,2),Ze=l(ne);{var et=x=>{var g=Pt(),m=l(g);ft(m),vt(m,!0),pt(m,y=>f(fe,y),()=>t(fe));var k=v(m,2);k.__click=Xe;var S=l(k,!0);o(k),o(g),G((y,j,w)=>{Me(m,"placeholder",y),k.disabled=j,I(S,w)},[()=>i()("bingo.guessPlaceholder"),()=>!t(B).trim(),()=>i()("bingo.closeGuess")]),yt(m,()=>t(B),y=>f(B,y)),p(x,g)},tt=x=>{var g=zt();g.__click=Oe;var m=l(g);{var k=w=>{var b=Rt(),D=V(b),h=v(D,2),J=l(h,!0);o(h),G(E=>I(J,E),[()=>i()("bingo.reveal")]),q(1,D,()=>O,()=>({duration:220})),q(2,D,()=>O,()=>({duration:220})),q(1,h,()=>O,()=>({duration:200})),q(2,h,()=>O,()=>({duration:160})),p(w,b)};Y(m,w=>{t(T)==="hidden"&&w(k)})}var S=v(m,2);let y;var j=l(S,!0);o(S),o(g),G(w=>{y=de(S,1,"relative z-0 text-center font-bold text-white",null,y,w),I(j,t(B))},[()=>({"select-none":t(T)==="hidden"})]),p(x,g)};Y(Ze,x=>{t(T)==="input"?x(et):x(tt,!1)})}o(ne),o(we),o(ae),G((x,g)=>{I(F,x),I(Ue,g)},[()=>i()("bingo.print",{default:"Print"}),()=>i()("bingo.reset",{default:"Reset"})]),q(3,a,()=>bt,()=>({y:-100,duration:500,delay:300})),q(3,ne,()=>O,()=>({duration:300,delay:800})),q(3,ae,()=>ht,()=>({duration:800})),p(r,e)};Y(be,r=>{t(d).length>0&&r(Fe)})}var he=v(be,2),_e=l(he),Je=l(_e,!0);o(_e),o(he),o(te);var xe=v(te,2);{let r=_(()=>i()("bingo.resetTitle",{default:"Reset Grid?"})),e=_(()=>i()("bingo.resetMessage",{default:"This will generate a new random grid and clear all marks. Are you sure?"})),a=_(()=>i()("bingo.resetConfirm",{default:"Reset"})),s=_(()=>i()("bingo.resetCancel",{default:"Cancel"}));Te(xe,{get visible(){return t(M)},get title(){return t(r)},get message(){return t(e)},get confirmText(){return t(a)},get cancelText(){return t(s)},onConfirm:Ee,onCancel:()=>f(M,!1)})}var Ke=v(xe,2);{let r=_(()=>i()("game.quitTitle",{default:"Leave Game?"})),e=_(()=>i()("game.quitMessage",{default:"Are you sure you want to leave? Your grid will be saved."})),a=_(()=>i()("game.quitConfirm",{default:"Leave"})),s=_(()=>i()("game.quitCancel",{default:"Stay"}));Te(Ke,{get visible(){return t(U)},get title(){return t(r)},get message(){return t(e)},get confirmText(){return t(a)},get cancelText(){return t(s)},onConfirm:Ve,onCancel:()=>f(U,!1)})}G(r=>I(Je,r),[()=>i()("footer.madeBy")]),p(W,me),ut(),K()}it(["click"]);export{Vt as component};
